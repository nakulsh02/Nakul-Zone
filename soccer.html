<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Pro Neon Soccer - Responsive</title>
<link rel="icon" href="favicon.png" type="image/png">
<style>
:root{
  --bg:#050505;
  --field:#0a0a0a;
  --ball:#00f7ff;
  --striker:#ff4d6d;
  --goal:#21c87a;
  --keeper:#ffd166;
}

*{margin:0;padding:0;box-sizing:border-box;font-family: 'Segoe UI', sans-serif;}

body{
  background: var(--bg);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  color:white;
  overflow: hidden; /* Prevents bouncing on mobile */
  touch-action: none;
}

.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 400px; /* PC constraint */
  padding: 10px;
}

#score{
  margin-bottom: 10px;
  color: var(--ball);
  font-size: 2rem;
  font-weight: 900;
  text-shadow: 0 0 10px var(--ball);
}

canvas{
  background: var(--field);
  border: 3px solid #1a1a1a;
  border-radius: 8px;
  box-shadow: 0 0 30px rgba(0,0,0,1);
  width: 100%; /* Makes it responsive */
  height: auto;
  aspect-ratio: 400 / 600;
  touch-action: none;
}
</style>
</head>

<body>

<div class="container">
    <div id="score">0</div>
    <canvas id="game" width="400" height="600"></canvas>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;

// Entities
const ball = { x:200, y:300, r:10, vx:0, vy:0 };
const striker = { x:200, y:520, r:22, canHit:true };
const goalTop = { x:110, y:0, w:180, h:10 }; 
const goalBottom = { x:110, y:590, w:180, h:10 }; 
const keeper = { x:200, y:50, r:18, speed: 4 };

// Input Handling (Universal Mouse + Touch)
function handleMove(e) {
  e.preventDefault();
  const rect = canvas.getBoundingClientRect();
  const clientX = e.touches ? e.touches[0].clientX : e.clientX;
  const clientY = e.touches ? e.touches[0].clientY : e.clientY;
  
  // Account for scaling
  const scaleX = canvas.width / rect.width;
  const scaleY = canvas.height / rect.height;
  
  striker.x = (clientX - rect.left) * scaleX;
  striker.y = (clientY - rect.top) * scaleY;
}

canvas.addEventListener("pointermove", handleMove);
canvas.addEventListener("touchmove", handleMove, {passive: false});

function drawPitch() {
  ctx.strokeStyle = "rgba(255,255,255,0.1)";
  ctx.lineWidth = 2;
  ctx.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);
  ctx.beginPath();
  ctx.moveTo(10, canvas.height / 2);
  ctx.lineTo(canvas.width - 10, canvas.height / 2);
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(canvas.width / 2, canvas.height / 2, 60, 0, Math.PI * 2);
  ctx.stroke();
  ctx.strokeRect(80, 10, 240, 100); 
  ctx.strokeRect(80, 490, 240, 100);
}

function draw(){
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPitch();

  // Top Goal
  ctx.fillStyle = varColor('--goal');
  ctx.shadowBlur = 10; ctx.shadowColor = varColor('--goal');
  ctx.fillRect(goalTop.x, goalTop.y, goalTop.w, goalTop.h);

  // Bottom Goal
  ctx.fillStyle = varColor('--striker');
  ctx.shadowColor = varColor('--striker');
  ctx.fillRect(goalBottom.x, goalBottom.y, goalBottom.w, goalBottom.h);

  // Keeper
  ctx.fillStyle = varColor('--keeper');
  ctx.shadowColor = varColor('--keeper');
  ctx.beginPath(); ctx.arc(keeper.x, keeper.y, keeper.r, 0, Math.PI*2); ctx.fill();

  // Ball
  ctx.fillStyle = varColor('--ball');
  ctx.shadowColor = varColor('--ball');
  ctx.beginPath(); ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2); ctx.fill();

  // Striker
  ctx.fillStyle = varColor('--striker');
  ctx.shadowColor = varColor('--striker');
  ctx.beginPath(); ctx.arc(striker.x, striker.y, striker.r, 0, Math.PI*2); ctx.fill();
  
  ctx.shadowBlur = 0; 
}

function varColor(name) {
  return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
}

function update(){
  const dx = ball.x - striker.x;
  const dy = ball.y - striker.y;
  const dist = Math.hypot(dx,dy);
  if(dist < striker.r + ball.r && striker.canHit){
    const angle = Math.atan2(dy,dx);
    ball.vx = Math.cos(angle)*12;
    ball.vy = Math.sin(angle)*12;
    striker.canHit = false;
    setTimeout(()=>striker.canHit=true, 150);
  }

  ball.x += ball.vx; ball.y += ball.vy;
  ball.vx *= 0.985; ball.vy *= 0.985;

  if(ball.x <= ball.r || ball.x >= canvas.width - ball.r){
    ball.vx *= -1;
    ball.x = ball.x <= ball.r ? ball.r : canvas.width - ball.r;
  }

  if(ball.y <= ball.r){
    if(ball.x > goalTop.x && ball.x < goalTop.x + goalTop.w){
      score++; document.getElementById("score").innerText = score; resetBall();
    } else {
      ball.vy *= -1; ball.y = ball.r;
    }
  }

  if(ball.y >= canvas.height - ball.r){
    if(ball.x > goalBottom.x && ball.x < goalBottom.x + goalBottom.w){
      score--; document.getElementById("score").innerText = score; resetBall();
    } else {
      ball.vy *= -1; ball.y = canvas.height - ball.r;
    }
  }

  if (ball.y < canvas.height / 2) {
    let moveDir = ball.x - keeper.x;
    if (Math.abs(moveDir) > 2) keeper.x += Math.sign(moveDir) * keeper.speed;
  } else {
    let backToCenter = (canvas.width / 2) - keeper.x;
    if (Math.abs(backToCenter) > 2) keeper.x += Math.sign(backToCenter) * 2;
  }

  if(keeper.x < goalTop.x + keeper.r) keeper.x = goalTop.x + keeper.r;
  if(keeper.x > goalTop.x + goalTop.w - keeper.r) keeper.x = goalTop.x + goalTop.w - keeper.r;

  const kdx = ball.x - keeper.x;
  const kdy = ball.y - keeper.y;
  if(Math.hypot(kdx, kdy) < ball.r + keeper.r) {
    const angle = Math.atan2(kdy, kdx);
    ball.vx = Math.cos(angle)*8; ball.vy = Math.sin(angle)*8;
  }

  draw();
  requestAnimationFrame(update);
}

function resetBall(){
  ball.x = 200; ball.y = 300;
  ball.vx = 0; ball.vy = 0;
}

update();
</script>
</body>
</html>
