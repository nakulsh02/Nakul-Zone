<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TERMINAL_BREAKER // 4-BIT</title>
<style>
:root {
  --bg: #0a0b10;
  --card: #161b22;
  --neon: #00f7ff;
  --correct: #00ff41;
  --partial: #f39c12;
  --border: #30363d;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Courier New', Courier, monospace; }

body {
  background: var(--bg);
  background-image: radial-gradient(circle at center, #111e31 0%, #0a0b10 100%);
  color: #e6edf3;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

#game-container {
  width: 100%;
  max-width: 380px;
  background: var(--card);
  padding: 30px;
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 20px 50px rgba(0,0,0,0.5);
}

/* Symmetrical Header & Stats */
.header-section {
  text-align: center;
  margin-bottom: 25px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 15px;
}

.stats-bar {
  display: flex;
  justify-content: space-between;
  font-size: 0.7rem;
  color: var(--neon);
  margin-bottom: 10px;
  letter-spacing: 1px;
}

h1 { font-size: 1.4rem; letter-spacing: 5px; color: var(--neon); margin-bottom: 5px; }

/* Symmetrical Input Area */
.input-group {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 25px;
}

input[type="text"] {
  width: 100%;
  padding: 15px;
  background: #0d1117;
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--neon);
  font-size: 1.8rem;
  text-align: center;
  letter-spacing: 20px;
  padding-left: 35px; /* Balances the letter spacing offset */
  outline: none;
  transition: 0.3s;
}

input[type="text"]:focus { border-color: var(--neon); box-shadow: 0 0 15px rgba(0, 247, 255, 0.1); }

button {
  width: 100%;
  padding: 14px;
  background: transparent;
  border: 1px solid var(--neon);
  color: var(--neon);
  font-weight: bold;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 2px;
  transition: all 0.3s ease;
}

button:hover { background: var(--neon); color: var(--bg); }

/* History Layout */
#history {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 220px;
  overflow-y: auto;
}

.guessRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(255,255,255,0.02);
  padding: 10px 15px;
  border-radius: 6px;
  border: 1px solid transparent;
}

.attempt-id { font-size: 0.7rem; color: #555; font-weight: bold; }

.cell-wrapper { display: flex; gap: 8px; }

.guessCell {
  width: 32px;
  height: 32px;
  line-height: 32px;
  background: #0d1117;
  border: 1px solid var(--border);
  font-size: 0.9rem;
  text-align: center;
  border-radius: 4px;
  font-weight: bold;
}

.correct { background: var(--correct) !important; color: #000; border-color: var(--correct); }
.partial { background: var(--partial) !important; color: #000; border-color: var(--partial); }

/* Popup Window */
#modal-overlay {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  display: none;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(6px);
  z-index: 999;
}

.modal {
  background: var(--card);
  padding: 40px;
  border-radius: 12px;
  border: 1px solid var(--correct);
  text-align: center;
  max-width: 300px;
  box-shadow: 0 0 40px rgba(0, 255, 65, 0.1);
}

.modal h2 { color: var(--correct); margin-bottom: 10px; font-size: 1.2rem; }
.modal p { color: #8b949e; font-size: 0.85rem; margin-bottom: 25px; line-height: 1.4; }
</style>
</head>
<body>

<div id="game-container">
  <div class="header-section">
    <div class="stats-bar">
      <span>ENCRYPTION: 4-DIGIT</span>
      <span id="attemptCount">ATTEMPT: #0</span>
    </div>
    <h1>CODE_BREAKER</h1>
  </div>
  
  <div class="input-group">
    <input type="text" id="guessInput" maxlength="4" placeholder="****" autocomplete="off">
    <button onclick="checkGuess()">Verify Identity</button>
  </div>

  <div id="history"></div>
</div>

<div id="modal-overlay" id="successModal">
  <div class="modal">
    <h2>BREACH SUCCESSFUL</h2>
    <p id="modal-msg">The encrypted pattern has been bypassed successfully.</p>
    <button onclick="resetGame()" style="border-color: var(--correct); color: var(--correct);">Initialize Restart</button>
  </div>
</div>

<script>
let secretCode = "";
let attempts = 0;

const historyDiv = document.getElementById('history');
const inputField = document.getElementById('guessInput');
const attemptDisplay = document.getElementById('attemptCount');
const modal = document.getElementById('modal-overlay');

function generateInfinitePattern(){
  // Generates a new unique 4-digit code using a secure-style random loop
  let newCode = "";
  for(let i=0; i<4; i++) {
    newCode += Math.floor(Math.random() * 10).toString();
  }
  return newCode;
}

function resetGame() {
  secretCode = generateInfinitePattern();
  attempts = 0;
  historyDiv.innerHTML = '';
  inputField.value = '';
  attemptDisplay.innerText = `ATTEMPT: #0`;
  modal.style.display = 'none';
}

function checkGuess(){
  const guess = inputField.value;
  if(guess.length !== 4 || isNaN(guess)) return;

  attempts++;
  attemptDisplay.innerText = `ATTEMPT: #${attempts}`;

  const row = document.createElement('div');
  row.classList.add('guessRow');
  
  const idLabel = document.createElement('span');
  idLabel.classList.add('attempt-id');
  idLabel.innerText = `LOG_${attempts.toString().padStart(2, '0')}`;
  
  const cellWrapper = document.createElement('div');
  cellWrapper.classList.add('cell-wrapper');

  for(let i=0; i<4; i++){
    const cell = document.createElement('div');
    cell.classList.add('guessCell');
    cell.innerText = guess[i];

    if(guess[i] === secretCode[i]) {
      cell.classList.add('correct');
    } else if(secretCode.includes(guess[i])) {
      cell.classList.add('partial');
    }
    cellWrapper.appendChild(cell);
  }

  row.appendChild(idLabel);
  row.appendChild(cellWrapper);
  historyDiv.prepend(row);
  inputField.value = '';

  if(guess === secretCode){
    setTimeout(() => {
      document.getElementById('modal-msg').innerText = `Pattern cracked in ${attempts} attempts. Unauthorized access granted.`;
      modal.style.display = 'flex';
    }, 300);
  }
}

inputField.addEventListener("keypress", (e) => { if (e.key === "Enter") checkGuess(); });

// Initialize first random pattern
resetGame();
</script>

</body>
</html>
